"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,n=require("react"),r=(require("prop-types"),require("@reach/auto-id")),o=require("@reach/utils");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e=exports.SliderOrientation||(exports.SliderOrientation={})).Horizontal="horizontal",e.Vertical="vertical",(t=exports.SliderHandleAlignment||(exports.SliderHandleAlignment={})).Center="center",t.Contain="contain";var u=exports.SliderOrientation.Horizontal,l=exports.SliderOrientation.Vertical,s=exports.SliderHandleAlignment.Center,c=exports.SliderHandleAlignment.Contain,d=o.createNamedContext("SliderContext",{}),v=function(){return n.useContext(d)},h=(exports,exports,exports,exports,o.forwardRefWithAs((function(e,t){var r=e.children,o=i(e,["children"]);return n.createElement(f,Object.assign({},o,{ref:t,"data-reach-slider":"",_componentName:"Slider"}),n.createElement(m,null,n.createElement(E,null),n.createElement(x,null),r))}))),f=o.forwardRefWithAs((function(e,t){var a,u=e["aria-label"],l=e["aria-labelledby"],s=e["aria-valuetext"],c=e.as,v=void 0===c?"div":c,h=e.defaultValue,f=e.disabled,p=void 0!==f&&f,m=e.value,w=e.getAriaLabel,E=e.getAriaValueText,g=e.getValueText,b=e.handleAlignment,x=void 0===b?exports.SliderHandleAlignment.Center:b,y=e.max,T=void 0===y?100:y,k=e.min,L=void 0===k?0:k,C=e.name,M=e.onChange,D=e.onKeyDown,O=e.onMouseDown,I=e.onMouseMove,P=e.onMouseUp,V=e.onPointerDown,H=e.onPointerUp,N=e.onTouchEnd,F=e.onTouchMove,_=e.onTouchStart,W=e.orientation,U=void 0===W?exports.SliderOrientation.Horizontal:W,j=e.step,K=void 0===j?1:j,B=e.children,q=e._componentName,z=void 0===q?"SliderInput":q,G=i(e,["aria-label","aria-labelledby","aria-valuetext","as","defaultValue","disabled","value","getAriaLabel","getAriaValueText","getValueText","handleAlignment","max","min","name","onChange","onKeyDown","onMouseDown","onMouseMove","onMouseUp","onPointerDown","onPointerUp","onTouchEnd","onTouchMove","onTouchStart","orientation","step","children","_componentName"]);o.useControlledSwitchWarning(m,"value",z);var X=n.useRef(),Y=r.useId(G.id),Z=n.useRef(!1),J=n.useRef(null),Q=n.useRef(null),$=n.useRef(null),ee=o.useForkedRef($,t),te=n.useState(!1),ne=te[0],re=te[1],oe=i(function(e){var t=n.useState({width:0,height:0}),r=t[0],a=r.width,i=r.height,u=t[1];return o.useIsomorphicLayoutEffect((function(){var t=o.getOwnerDocument(e.current).defaultView||window;if(e.current){var n=t.getComputedStyle(e.current),r=n.width,l=parseFloat(n.height),s=parseFloat(r);l===i&&s===a||u({height:l,width:s})}}),[e,a,i]),{ref:e,width:a,height:i}}(Q),["ref"]),ae=o.useControlledState(m,h||L),ie=ae[1],ue=R(ae[0],L,T),le=A(ue,L,T),se=U===exports.SliderOrientation.Vertical,ce=se?oe.height:oe.width,de="calc("+le+"% - "+(x===exports.SliderHandleAlignment.Center?ce+"px / 2":ce+"px * "+.01*le)+")",ve=n.useRef(de);o.useIsomorphicLayoutEffect((function(){ve.current=de}),[de]);var he=n.useRef(M);o.useIsomorphicLayoutEffect((function(){he.current=M}),[M]);var fe=n.useCallback((function(e){ie(e),he.current&&he.current(e,{min:L,max:T,handlePosition:ve.current})}),[T,L,ie]),pe=n.useCallback((function(e){return function(e,t,n){var r=n.orientation,o=n.min,a=n.max,i=n.step;if(!t||!e)return null;var u=t.getBoundingClientRect(),l=r===exports.SliderOrientation.Vertical,s=function(e,t,n){return(n-t)*e+t}((l?u.bottom-e.y:e.x-u.left)/(l?u.height:u.width),o,a);return R(i?S(s,i,o):s,o,a)}(function(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}(e,X),J.current,{step:K,orientation:U,min:L,max:T})}),[T,L,U,K]),me=o.useEventCallback((function(e){if(!p){var t,n=(T-L)/10,r=K||(T-L)/100;switch(e.key){case"ArrowLeft":case"ArrowDown":t=ue-r;break;case"ArrowRight":case"ArrowUp":t=ue+r;break;case"PageDown":t=ue-n;break;case"PageUp":t=ue+n;break;case"Home":t=L;break;case"End":t=T;break;default:return}e.preventDefault(),t=R(K?S(t,K,L):t,L,T),fe(t)}})),we=g?g(ue):E?E(ue):s,Ee=((a={})[se?"height":"width"]=le+"%",a),ge={ariaLabel:w?w(ue):u,ariaLabelledBy:l,ariaValueText:we,handleDimensions:oe,handleKeyDown:me,handlePosition:de,handleRef:Q,hasFocus:ne,onKeyDown:D,setHasFocus:re,sliderId:Y,sliderMax:T,sliderMin:L,value:ue,disabled:!!p,isVertical:se,orientation:U,trackPercent:le,trackRef:J,rangeStyle:Ee,updateValue:fe},be=n.useRef(o.noop),xe=n.useRef(o.noop),ye=n.useRef(o.noop),Re=n.useRef({onMouseMove:I,onMouseDown:O,onMouseUp:P,onTouchStart:_,onTouchEnd:N,onTouchMove:F,onPointerDown:V,onPointerUp:H});o.useIsomorphicLayoutEffect((function(){Re.current.onMouseMove=I,Re.current.onMouseDown=O,Re.current.onMouseUp=P,Re.current.onTouchStart=_,Re.current.onTouchEnd=N,Re.current.onTouchMove=F,Re.current.onPointerDown=V,Re.current.onPointerUp=H}),[I,O,P,_,N,F,V,H]);var Se=o.useEventCallback((function(e){if(!o.isRightClick(e))if(p)Z.current=!1;else{var t=o.getOwnerDocument($.current).defaultView||window;if(Z.current=!0,e.changedTouches){var n;e.preventDefault();var r=null===(n=e.changedTouches)||void 0===n?void 0:n[0];null!=r&&(X.current=r.identifier)}var a=pe(e);null!=a&&(t.requestAnimationFrame((function(){var e;return null===(e=Q.current)||void 0===e?void 0:e.focus()})),fe(a),be.current=Ce(),ye.current=Me())}})),Ae=o.useEventCallback((function(e){var t;o.isRightClick(e)||(p?Z.current=!1:(Z.current=!0,null===(t=$.current)||void 0===t||t.setPointerCapture(e.pointerId)))})),Te=o.useEventCallback((function(e){var t;o.isRightClick(e)||(null===(t=$.current)||void 0===t||t.releasePointerCapture(e.pointerId),Z.current=!1)})),ke=o.useEventCallback((function(e){if(!p&&Z.current){var t=pe(e);null!=t&&fe(t)}else Z.current=!1})),Le=o.useEventCallback((function(e){o.isRightClick(e)||(Z.current=!1,null!=pe(e)&&(X.current=void 0,be.current(),ye.current()))})),Ce=n.useCallback((function(){var e=o.getOwnerDocument($.current),t=o.wrapEvent(Re.current.onTouchMove,ke),n=o.wrapEvent(Re.current.onMouseMove,ke);return e.addEventListener("touchmove",t),e.addEventListener("mousemove",n),function(){e.removeEventListener("touchmove",t),e.removeEventListener("mousemove",n)}}),[ke]),Me=n.useCallback((function(){var e=o.getOwnerDocument($.current),t=e.defaultView||window,n=o.wrapEvent(Re.current.onPointerUp,Te),r=o.wrapEvent(Re.current.onTouchEnd,Le),a=o.wrapEvent(Re.current.onMouseUp,Le);return"PointerEvent"in t&&e.addEventListener("pointerup",n),e.addEventListener("touchend",r),e.addEventListener("mouseup",a),function(){"PointerEvent"in t&&e.removeEventListener("pointerup",n),e.removeEventListener("touchend",r),e.removeEventListener("mouseup",a)}}),[Le,Te]),De=n.useCallback((function(){var e=$.current;if(!e)return o.noop;var t=o.getOwnerDocument(e).defaultView||window,n=o.wrapEvent(Re.current.onTouchStart,Se),r=o.wrapEvent(Re.current.onMouseDown,Se),a=o.wrapEvent(Re.current.onPointerDown,Ae);return e.addEventListener("touchstart",n),e.addEventListener("mousedown",r),"PointerEvent"in t&&e.addEventListener("pointerdown",a),function(){e.removeEventListener("touchstart",n),e.removeEventListener("mousedown",r),"PointerEvent"in t&&e.removeEventListener("pointerdown",a)}}),[Ae,Se]);return n.useEffect((function(){return xe.current=De(),function(){xe.current(),ye.current(),be.current()}}),[De]),o.useCheckStyles("slider"),n.createElement(d.Provider,{value:ge},n.createElement(v,Object.assign({},G,{ref:ee,"data-reach-slider-input":"","data-disabled":p?"":void 0,"data-orientation":U,tabIndex:-1}),o.isFunction(B)?B({hasFocus:ne,id:Y,max:T,min:L,value:ue,ariaValueText:we,valueText:we}):B,C&&n.createElement("input",{type:"hidden",value:ue,name:C,id:Y&&o.makeId("input",Y)})))})),p=o.forwardRefWithAs((function(e,t){var r=e.as,u=void 0===r?"div":r,l=e.children,s=e.style,c=void 0===s?{}:s,d=i(e,["as","children","style"]),h=v(),f=h.disabled,p=h.orientation,m=o.useForkedRef(h.trackRef,t);return n.createElement(u,Object.assign({ref:m,style:a({},c,{position:"relative"})},d,{"data-reach-slider-track":"","data-disabled":f?"":void 0,"data-orientation":p}),l)})),m=o.memoWithAs(p),w=o.forwardRefWithAs((function(e,t){var r=e.as,o=void 0===r?"div":r,u=e.style,l=void 0===u?{}:u,s=i(e,["as","children","style"]),c=v(),d=c.disabled,h=c.orientation;return n.createElement(o,Object.assign({ref:t,style:a({position:"absolute"},c.rangeStyle,l)},s,{"data-reach-slider-range":"","data-disabled":d?"":void 0,"data-orientation":h}))})),E=o.memoWithAs(w),g=o.memoWithAs(o.forwardRefWithAs((function(e,t){return n.createElement(w,Object.assign({"data-reach-slider-track-highlight":""},e,{ref:t}))}))),b=o.forwardRefWithAs((function(e,t){var r=e.as,u=void 0===r?"div":r,l=e.onBlur,s=e.onFocus,c=e.style,d=void 0===c?{}:c,h=e.onKeyDown,f=i(e,["as","onBlur","onFocus","style","onKeyDown"]),p=v(),m=p.ariaLabel,w=p.ariaLabelledBy,E=p.ariaValueText,g=p.disabled,b=p.handlePosition,x=p.isVertical,y=p.handleKeyDown,R=p.orientation,S=p.setHasFocus,A=p.sliderMin,T=p.sliderMax,k=p.value,L=o.useForkedRef(p.handleRef,t);return n.createElement(u,Object.assign({"aria-disabled":g||void 0,"aria-label":m,"aria-labelledby":m?void 0:w,"aria-orientation":R,"aria-valuemax":T,"aria-valuemin":A,"aria-valuenow":k,"aria-valuetext":E,role:"slider",tabIndex:g?-1:0},f,{"data-reach-slider-handle":"",ref:L,onBlur:o.wrapEvent(l,(function(){S(!1)})),onFocus:o.wrapEvent(s,(function(){S(!0)})),onKeyDown:o.wrapEvent(h,y),style:a({position:"absolute"},x?{bottom:b}:{left:b},d)}))})),x=o.memoWithAs(b),y=o.memoWithAs(o.forwardRefWithAs((function(e,t){var r=e.as,o=void 0===r?"div":r,u=e.children,l=e.style,s=void 0===l?{}:l,c=e.value,d=i(e,["as","children","style","value"]),h=v(),f=h.disabled,p=h.isVertical,m=h.orientation,w=h.sliderMin,E=h.sliderMax,g=h.value,b=!(c<w||c>E),x=A(c,w,E)+"%",y=c<g?"under-value":c===g?"at-value":"over-value";return b?n.createElement(o,Object.assign({ref:t,style:a({position:"absolute"},p?{bottom:x}:{left:x},s)},d,{"data-reach-slider-marker":"","data-disabled":f?"":void 0,"data-orientation":m,"data-state":y,"data-value":c,children:u})):null})));function R(e,t,n){return e>n?n:e<t?t:e}function S(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function A(e,t,n){return 100*(e-t)/(n-t)}exports.SLIDER_HANDLE_ALIGN_CENTER=s,exports.SLIDER_HANDLE_ALIGN_CONTAIN=c,exports.SLIDER_ORIENTATION_HORIZONTAL=u,exports.SLIDER_ORIENTATION_VERTICAL=l,exports.Slider=h,exports.SliderHandle=x,exports.SliderInput=f,exports.SliderMarker=y,exports.SliderRange=E,exports.SliderTrack=m,exports.SliderTrackHighlight=g,exports.default=h;
//# sourceMappingURL=slider.cjs.production.min.js.map
