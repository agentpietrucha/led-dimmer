{"version":3,"file":"slider.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["/**\n * Welcome to @reach/slider!\n *\n * A UI input component where the user selects a value from within a given\n * range. A Slider has a handle that can be moved along a track to change its\n * value. When the user's mouse or focus is on the Slider's handle, the value\n * can be incremented with keyboard controls.\n *\n * Random thoughts/notes:\n *  - Currently testing this against the behavior of the native input range\n *    element to get our slider on par. We'll explore animated and multi-handle\n *    sliders next.\n *  - We may want to research some use cases for reversed sliders in RTL\n *    languages if that's a thing\n *\n * @see Docs     https://reach.tech/slider\n * @see Source   https://github.com/reach/reach-ui/tree/main/packages/slider\n * @see WAI-ARIA https://www.w3.org/TR/wai-aria-practices-1.2/#slider\n * @see Example  https://github.com/Stanko/aria-progress-range-slider\n * @see Example  http://www.oaa-accessibility.org/examplep/slider1/\n */\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\nimport * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useId } from \"@reach/auto-id\";\nimport {\n  createNamedContext,\n  forwardRefWithAs,\n  getOwnerDocument,\n  isFunction,\n  isRightClick,\n  makeId,\n  memoWithAs,\n  noop,\n  useCheckStyles,\n  useControlledState,\n  useControlledSwitchWarning,\n  useEventCallback,\n  useForkedRef,\n  useIsomorphicLayoutEffect,\n  warning,\n  wrapEvent,\n} from \"@reach/utils\";\n\n// TODO: Remove in 1.0\ntype SliderAlignment = \"center\" | \"contain\";\n\nenum SliderOrientation {\n  Horizontal = \"horizontal\",\n  Vertical = \"vertical\",\n  // TODO: Add support for RTL slider\n}\n\n// TODO: Remove in 1.0\nenum SliderHandleAlignment {\n  // Handle is centered directly over the current value marker\n  Center = \"center\",\n  // Handle is contained within the bounds of the track, offset slightly from\n  // the value's center mark to accommodate\n  Contain = \"contain\",\n}\n\n// TODO: Remove in 1.0\nconst SLIDER_ORIENTATION_HORIZONTAL = SliderOrientation.Horizontal;\nconst SLIDER_ORIENTATION_VERTICAL = SliderOrientation.Vertical;\nconst SLIDER_HANDLE_ALIGN_CENTER = SliderHandleAlignment.Center;\nconst SLIDER_HANDLE_ALIGN_CONTAIN = SliderHandleAlignment.Contain;\n\nconst SliderContext = createNamedContext<ISliderContext>(\n  \"SliderContext\",\n  {} as ISliderContext\n);\nconst useSliderContext = () => React.useContext(SliderContext);\n\n// These proptypes are shared between the composed SliderInput component and the\n// simplified Slider\nconst sliderPropTypes = {\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  getAriaLabel: PropTypes.func,\n  getAriaValueText: PropTypes.func,\n  getValueText: PropTypes.func,\n  handleAlignment: PropTypes.oneOf([\n    SliderHandleAlignment.Center,\n    SliderHandleAlignment.Contain,\n  ]),\n  min: PropTypes.number,\n  max: PropTypes.number,\n  name: PropTypes.string,\n  orientation: PropTypes.oneOf([\n    SliderOrientation.Horizontal,\n    SliderOrientation.Vertical,\n  ]),\n  onChange: PropTypes.func,\n  step: PropTypes.number,\n  value: PropTypes.number,\n};\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Slider\n *\n * @see Docs https://reach.tech/slider#slider\n */\nconst Slider = forwardRefWithAs<SliderProps, \"div\">(function Slider(\n  { children, ...props },\n  forwardedRef\n) {\n  return (\n    <SliderInput\n      {...props}\n      ref={forwardedRef}\n      data-reach-slider=\"\"\n      _componentName=\"Slider\"\n    >\n      <SliderTrack>\n        <SliderRange />\n        <SliderHandle />\n        {children}\n      </SliderTrack>\n    </SliderInput>\n  );\n});\n\n/**\n * @see Docs https://reach.tech/slider#slider-props\n */\ntype SliderProps = {\n  /**\n   * `Slider` can accept `SliderMarker` children to enhance display of specific\n   * values along the track.\n   *\n   * @see Docs https://reach.tech/slider#slider-children\n   */\n  children?: React.ReactNode;\n  /**\n   * The defaultValue is used to set an initial value for an uncontrolled\n   * Slider.\n   *\n   * @see Docs https://reach.tech/slider#slider-defaultvalue\n   */\n  defaultValue?: number;\n  /**\n   * @see Docs https://reach.tech/slider#slider-disabled\n   */\n  disabled?: boolean;\n  /**\n   * Whether or not the slider should be disabled from user interaction.\n   *\n   * @see Docs https://reach.tech/slider#slider-value\n   */\n  value?: number;\n  /**\n   * A function used to set a human-readable name for the slider.\n   *\n   * @see Docs https://reach.tech/slider#slider-getarialabel\n   */\n  getAriaLabel?(value: number): string;\n  /**\n   * A function used to set a human-readable value text based on the slider's\n   * current value.\n   *\n   * @see Docs https://reach.tech/slider#slider-getariavaluetext\n   */\n  getAriaValueText?(value: number): string;\n  /**\n   * Deprecated. Use `getAriaValueText` instead.\n   *\n   * @deprecated\n   * @param value\n   */\n  getValueText?(value: number): string;\n  /**\n   * When set to `center`, the slider's handle will be positioned directly\n   * centered over the slider's curremt value on the track. This means that when\n   * the slider is at its min or max value, a visiable slider handle will extend\n   * beyond the width (or height in vertical mode) of the slider track. When set\n   * to `contain`, the slider handle will always be contained within the bounds\n   * of the track, meaning its position will be slightly offset from the actual\n   * value depending on where it sits on the track.\n   *\n   * @see Docs https://reach.tech/slider#slider-handlealignment\n   */\n  handleAlignment?: \"center\" | \"contain\" | SliderAlignment;\n  /**\n   * The maximum value of the slider. Defaults to `100`.\n   *\n   * @see Docs https://reach.tech/slider#slider-max\n   */\n  max?: number;\n  /**\n   * The minimum value of the slider. Defaults to `0`.\n   *\n   * @see Docs https://reach.tech/slider#slider-min\n   */\n  min?: number;\n  /**\n   * If the slider is used as a form input, it should accept a `name` prop to\n   * identify its value in context of the form.\n   *\n   * @see Docs https://reach.tech/slider#slider-name\n   */\n  name?: string;\n  /**\n   * Callback that fires when the slider value changes. When the `value` prop is\n   * set, the Slider state becomes controlled and `onChange` must be used to\n   * update the value in response to user interaction.\n   *\n   * @see Docs https://reach.tech/slider#slider-onchange\n   */\n  onChange?(\n    newValue: number,\n    props?: {\n      min?: number;\n      max?: number;\n      handlePosition?: string;\n    }\n  ): void;\n\n  // We use native DOM events for the slider since they are global\n  onMouseDown?(event: MouseEvent): void;\n  onMouseMove?(event: MouseEvent): void;\n  onMouseUp?(event: MouseEvent): void;\n  onPointerDown?(event: PointerEvent): void;\n  onPointerUp?(event: PointerEvent): void;\n  onTouchEnd?(event: TouchEvent): void;\n  onTouchMove?(event: TouchEvent): void;\n  onTouchStart?(event: TouchEvent): void;\n\n  /**\n   * Sets the slider to horizontal or vertical mode.\n   *\n   * @see Docs https://reach.tech/slider#slider-orientation\n   */\n  orientation?: SliderOrientation;\n  /**\n   * The step attribute is a number that specifies the granularity that the\n   * value must adhere to as it changes. Step sets minimum intervals of change,\n   * creating a \"snap\" effect when the handle is moved along the track.\n   *\n   * @see Docs https://reach.tech/slider#slider-step\n   */\n  step?: number;\n};\n\nif (__DEV__) {\n  Slider.displayName = \"Slider\";\n  Slider.propTypes = {\n    ...sliderPropTypes,\n    children: PropTypes.node,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * SliderInput\n *\n * The parent component of the slider interface. This is a lower level component\n * if you need more control over styles or rendering the slider's inner\n * components.\n *\n * @see Docs https://reach.tech/slider#sliderinput\n */\nconst SliderInput = forwardRefWithAs<\n  SliderInputProps & { _componentName?: string }\n>(function SliderInput(\n  {\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabelledBy,\n    \"aria-valuetext\": ariaValueTextProp,\n    as: Comp = \"div\",\n    defaultValue,\n    disabled = false,\n    value: controlledValue,\n    getAriaLabel,\n    getAriaValueText,\n    getValueText: DEPRECATED_getValueText, // TODO: Remove in 1.0\n    handleAlignment = SliderHandleAlignment.Center,\n    max = 100,\n    min = 0,\n    name,\n    onChange,\n    onKeyDown,\n    onMouseDown,\n    onMouseMove,\n    onMouseUp,\n    onPointerDown,\n    onPointerUp,\n    onTouchEnd,\n    onTouchMove,\n    onTouchStart,\n    orientation = SliderOrientation.Horizontal,\n    step = 1,\n    children,\n    _componentName = \"SliderInput\",\n    ...rest\n  },\n  forwardedRef\n) {\n  useControlledSwitchWarning(controlledValue, \"value\", _componentName);\n\n  warning(\n    !DEPRECATED_getValueText,\n    \"The `getValueText` prop in @reach/slider is deprecated. Please use `getAriaValueText` instead.\"\n  );\n\n  let touchId: TouchIdRef = React.useRef();\n\n  let id = useId(rest.id);\n\n  // Track whether or not the pointer is down without updating the component\n  let pointerDownRef = React.useRef(false);\n\n  let trackRef: TrackRef = React.useRef(null);\n  let handleRef: HandleRef = React.useRef(null);\n  let sliderRef: SliderRef = React.useRef(null);\n  let ref = useForkedRef(sliderRef, forwardedRef);\n\n  let [hasFocus, setHasFocus] = React.useState(false);\n\n  let { ref: x, ...handleDimensions } = useDimensions(handleRef);\n\n  let [_value, setValue] = useControlledState(\n    controlledValue,\n    defaultValue || min\n  );\n  let value = clamp(_value, min, max);\n  let trackPercent = valueToPercent(value, min, max);\n  let isVertical = orientation === SliderOrientation.Vertical;\n\n  let handleSize = isVertical\n    ? handleDimensions.height\n    : handleDimensions.width;\n\n  // TODO: Consider removing the `handleAlignment` prop\n  // We may want to use accept a `handlePosition` prop instead and let apps\n  // define their own positioning logic, similar to how we do for popovers.\n  let handlePosition = `calc(${trackPercent}% - ${\n    handleAlignment === SliderHandleAlignment.Center\n      ? `${handleSize}px / 2`\n      : `${handleSize}px * ${trackPercent * 0.01}`\n  })`;\n  let handlePositionRef = React.useRef(handlePosition);\n  useIsomorphicLayoutEffect(() => {\n    handlePositionRef.current = handlePosition;\n  }, [handlePosition]);\n\n  let onChangeRef = React.useRef(onChange);\n  useIsomorphicLayoutEffect(() => {\n    onChangeRef.current = onChange;\n  }, [onChange]);\n  let updateValue = React.useCallback(\n    function updateValue(newValue) {\n      setValue(newValue);\n      if (onChangeRef.current) {\n        // Prevent onChange from recreating the function\n        // TODO: Reonsider the onChange callback API\n        onChangeRef.current(newValue, {\n          min,\n          max,\n          // Prevent handlePosition from recreating the function\n          handlePosition: handlePositionRef.current,\n        });\n      }\n    },\n    [max, min, setValue]\n  );\n\n  let getNewValueFromEvent = React.useCallback(\n    (event: SomePointerEvent) => {\n      return getNewValue(getPointerPosition(event, touchId), trackRef.current, {\n        step,\n        orientation,\n        min,\n        max,\n      });\n    },\n    [max, min, orientation, step]\n  );\n\n  // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_kbd_interaction\n  let handleKeyDown = useEventCallback((event: React.KeyboardEvent) => {\n    if (disabled) {\n      return;\n    }\n\n    let newValue: number;\n    let tenSteps = (max - min) / 10;\n    let keyStep = step || (max - min) / 100;\n\n    switch (event.key) {\n      // Decrease the value of the slider by one step.\n      case \"ArrowLeft\":\n      case \"ArrowDown\":\n        newValue = value - keyStep;\n        break;\n      // Increase the value of the slider by one step\n      case \"ArrowRight\":\n      case \"ArrowUp\":\n        newValue = value + keyStep;\n        break;\n      // Decrement the slider by an amount larger than the step change made by\n      // `ArrowDown`.\n      case \"PageDown\":\n        newValue = value - tenSteps;\n        break;\n      // Increment the slider by an amount larger than the step change made by\n      // `ArrowUp`.\n      case \"PageUp\":\n        newValue = value + tenSteps;\n        break;\n      // Set the slider to the first allowed value in its range.\n      case \"Home\":\n        newValue = min;\n        break;\n      // Set the slider to the last allowed value in its range.\n      case \"End\":\n        newValue = max;\n        break;\n      default:\n        return;\n    }\n\n    event.preventDefault();\n    newValue = clamp(\n      step ? roundValueToStep(newValue, step, min) : newValue,\n      min,\n      max\n    );\n    updateValue(newValue);\n  });\n\n  let ariaValueText = DEPRECATED_getValueText\n    ? DEPRECATED_getValueText(value)\n    : getAriaValueText\n    ? getAriaValueText(value)\n    : ariaValueTextProp;\n\n  let rangeStyle = { [isVertical ? \"height\" : \"width\"]: `${trackPercent}%` };\n\n  let ctx: ISliderContext = {\n    ariaLabel: getAriaLabel ? getAriaLabel(value) : ariaLabel,\n    ariaLabelledBy,\n    ariaValueText,\n    handleDimensions,\n    handleKeyDown,\n    handlePosition,\n    handleRef,\n    hasFocus,\n    onKeyDown,\n    setHasFocus,\n    sliderId: id,\n    sliderMax: max,\n    sliderMin: min,\n    value,\n    disabled: !!disabled,\n    isVertical,\n    orientation,\n    trackPercent,\n    trackRef,\n    rangeStyle,\n    updateValue,\n  };\n\n  // Slide events!\n  // We will try to use pointer events if they are supported to leverage\n  // setPointerCapture and releasePointerCapture. We'll fall back to separate\n  // mouse and touch events.\n  // TODO: This could be more concise\n  let removeMoveEvents = React.useRef<() => void>(noop);\n  let removeStartEvents = React.useRef<() => void>(noop);\n  let removeEndEvents = React.useRef<() => void>(noop);\n\n  // Store our event handlers in refs so we aren't attaching/detaching events\n  // on every render if the user doesn't useCallback\n  let appEvents = React.useRef({\n    onMouseMove,\n    onMouseDown,\n    onMouseUp,\n    onTouchStart,\n    onTouchEnd,\n    onTouchMove,\n    onPointerDown,\n    onPointerUp,\n  });\n  useIsomorphicLayoutEffect(() => {\n    appEvents.current.onMouseMove = onMouseMove;\n    appEvents.current.onMouseDown = onMouseDown;\n    appEvents.current.onMouseUp = onMouseUp;\n    appEvents.current.onTouchStart = onTouchStart;\n    appEvents.current.onTouchEnd = onTouchEnd;\n    appEvents.current.onTouchMove = onTouchMove;\n    appEvents.current.onPointerDown = onPointerDown;\n    appEvents.current.onPointerUp = onPointerUp;\n  }, [onMouseMove, onMouseDown, onMouseUp, onTouchStart, onTouchEnd, onTouchMove, onPointerDown, onPointerUp]);\n\n  let handleSlideStart = useEventCallback((event: SomePointerEvent) => {\n    if (isRightClick(event)) return;\n\n    if (disabled) {\n      pointerDownRef.current = false;\n      return;\n    }\n\n    let ownerDocument = getOwnerDocument(sliderRef.current)!;\n    let ownerWindow = ownerDocument.defaultView || window;\n    pointerDownRef.current = true;\n\n    if ((event as TouchEvent).changedTouches) {\n      // Prevent scrolling for touch events\n      event.preventDefault();\n      let touch = (event as TouchEvent).changedTouches?.[0];\n      if (touch != null) {\n        touchId.current = touch.identifier;\n      }\n    }\n\n    let newValue = getNewValueFromEvent(event);\n    if (newValue == null) {\n      return;\n    }\n    ownerWindow.requestAnimationFrame(() => handleRef.current?.focus());\n    updateValue(newValue);\n\n    removeMoveEvents.current = addMoveListener();\n    removeEndEvents.current = addEndListener();\n  });\n\n  let setPointerCapture = useEventCallback((event: PointerEvent) => {\n    if (isRightClick(event)) return;\n    if (disabled) {\n      pointerDownRef.current = false;\n      return;\n    }\n    pointerDownRef.current = true;\n    sliderRef.current?.setPointerCapture(event.pointerId);\n  });\n\n  let releasePointerCapture = useEventCallback((event: PointerEvent) => {\n    if (isRightClick(event)) return;\n    sliderRef.current?.releasePointerCapture(event.pointerId);\n    pointerDownRef.current = false;\n  });\n\n  let handlePointerMove = useEventCallback((event: SomePointerEvent) => {\n    if (disabled || !pointerDownRef.current) {\n      pointerDownRef.current = false;\n      return;\n    }\n\n    let newValue = getNewValueFromEvent(event);\n    if (newValue == null) {\n      return;\n    }\n    updateValue(newValue);\n  });\n\n  let handleSlideStop = useEventCallback((event: SomePointerEvent) => {\n    if (isRightClick(event)) return;\n\n    pointerDownRef.current = false;\n\n    let newValue = getNewValueFromEvent(event);\n    if (newValue == null) {\n      return;\n    }\n\n    touchId.current = undefined;\n\n    removeMoveEvents.current();\n    removeEndEvents.current();\n  });\n\n  let addMoveListener = React.useCallback(() => {\n    let ownerDocument = getOwnerDocument(sliderRef.current)!;\n    let touchListener = wrapEvent(\n      appEvents.current.onTouchMove,\n      handlePointerMove\n    );\n    let mouseListener = wrapEvent(\n      appEvents.current.onMouseMove,\n      handlePointerMove\n    );\n    ownerDocument.addEventListener(\"touchmove\", touchListener);\n    ownerDocument.addEventListener(\"mousemove\", mouseListener);\n    return () => {\n      ownerDocument.removeEventListener(\"touchmove\", touchListener);\n      ownerDocument.removeEventListener(\"mousemove\", mouseListener);\n    };\n  }, [handlePointerMove]);\n\n  let addEndListener = React.useCallback(() => {\n    let ownerDocument = getOwnerDocument(sliderRef.current)!;\n    let ownerWindow = ownerDocument.defaultView || window;\n    let pointerListener = wrapEvent(\n      appEvents.current.onPointerUp,\n      releasePointerCapture\n    );\n    let touchListener = wrapEvent(\n      appEvents.current.onTouchEnd,\n      handleSlideStop\n    );\n    let mouseListener = wrapEvent(appEvents.current.onMouseUp, handleSlideStop);\n    if (\"PointerEvent\" in ownerWindow) {\n      ownerDocument.addEventListener(\"pointerup\", pointerListener);\n    }\n    ownerDocument.addEventListener(\"touchend\", touchListener);\n    ownerDocument.addEventListener(\"mouseup\", mouseListener);\n    return () => {\n      if (\"PointerEvent\" in ownerWindow) {\n        ownerDocument.removeEventListener(\"pointerup\", pointerListener);\n      }\n      ownerDocument.removeEventListener(\"touchend\", touchListener);\n      ownerDocument.removeEventListener(\"mouseup\", mouseListener);\n    };\n  }, [handleSlideStop, releasePointerCapture]);\n\n  let addStartListener = React.useCallback(() => {\n    // e.preventDefault is ignored by React's synthetic touchStart event, so\n    // we attach the listener directly to the DOM node\n    // https://github.com/facebook/react/issues/9809#issuecomment-413978405\n    let sliderElement = sliderRef.current!;\n    if (!sliderElement) {\n      return noop;\n    }\n\n    let ownerDocument = getOwnerDocument(sliderElement)!;\n    let ownerWindow = ownerDocument.defaultView || window;\n    let touchListener = wrapEvent(\n      appEvents.current.onTouchStart,\n      handleSlideStart\n    );\n    let mouseListener = wrapEvent(\n      appEvents.current.onMouseDown,\n      handleSlideStart\n    );\n    let pointerListener = wrapEvent(\n      appEvents.current.onPointerDown,\n      setPointerCapture\n    );\n    sliderElement.addEventListener(\"touchstart\", touchListener);\n    sliderElement.addEventListener(\"mousedown\", mouseListener);\n    if (\"PointerEvent\" in ownerWindow) {\n      sliderElement.addEventListener(\"pointerdown\", pointerListener);\n    }\n    return () => {\n      sliderElement.removeEventListener(\"touchstart\", touchListener);\n      sliderElement.removeEventListener(\"mousedown\", mouseListener);\n      if (\"PointerEvent\" in ownerWindow) {\n        sliderElement.removeEventListener(\"pointerdown\", pointerListener);\n      }\n    };\n  }, [setPointerCapture, handleSlideStart]);\n\n  React.useEffect(() => {\n    removeStartEvents.current = addStartListener();\n\n    return () => {\n      removeStartEvents.current();\n      removeEndEvents.current();\n      removeMoveEvents.current();\n    };\n  }, [addStartListener]);\n\n  useCheckStyles(\"slider\");\n\n  return (\n    <SliderContext.Provider value={ctx}>\n      <Comp\n        {...rest}\n        ref={ref}\n        data-reach-slider-input=\"\"\n        data-disabled={disabled ? \"\" : undefined}\n        data-orientation={orientation}\n        tabIndex={-1}\n      >\n        {isFunction(children)\n          ? children({\n              hasFocus,\n              id,\n              max,\n              min,\n              value,\n              ariaValueText,\n              valueText: ariaValueText, // TODO: Remove in 1.0\n            })\n          : children}\n        {name && (\n          // If the slider is used in a form we'll need an input field to\n          // capture the value. We'll assume this when the component is given a\n          // form field name (A `name` prop doesn't really make sense in any\n          // other context).\n          <input\n            type=\"hidden\"\n            value={value}\n            name={name}\n            id={id && makeId(\"input\", id)}\n          />\n        )}\n      </Comp>\n    </SliderContext.Provider>\n  );\n});\n\n/**\n * @see Docs https://reach.tech/slider#sliderinput-props\n */\ntype SliderInputProps = Omit<SliderProps, \"children\"> & {\n  /**\n   * Slider expects `<SliderTrack>` as its child; The track will accept all\n   * additional slider sub-components as children. It can also accept a\n   * function/render prop as its child to expose some of its internal state\n   * variables.\n   *\n   * @see Docs https://reach.tech/slider#sliderinput-children\n   */\n  children: React.ReactNode | SliderChildrenRender;\n};\n\nif (__DEV__) {\n  SliderInput.displayName = \"SliderInput\";\n  SliderInput.propTypes = {\n    ...sliderPropTypes,\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * SliderTrack\n *\n * @see Docs https://reach.tech/slider#slidertrack\n */\nconst SliderTrackImpl = forwardRefWithAs<SliderTrackProps>(function SliderTrack(\n  { as: Comp = \"div\", children, style = {}, ...props },\n  forwardedRef\n) {\n  const { disabled, orientation, trackRef } = useSliderContext();\n  const ref = useForkedRef(trackRef, forwardedRef);\n\n  return (\n    <Comp\n      ref={ref}\n      style={{ ...style, position: \"relative\" }}\n      {...props}\n      data-reach-slider-track=\"\"\n      data-disabled={disabled ? \"\" : undefined}\n      data-orientation={orientation}\n    >\n      {children}\n    </Comp>\n  );\n});\n\nif (__DEV__) {\n  SliderTrackImpl.displayName = \"SliderTrack\";\n  SliderTrackImpl.propTypes = {\n    children: PropTypes.node.isRequired,\n  };\n}\n\nconst SliderTrack = memoWithAs(SliderTrackImpl);\n\n/**\n * @see Docs https://reach.tech/slider#slidertrack-props\n */\ntype SliderTrackProps = {\n  /**\n   * `SliderTrack` expects `<SliderHandle>`, at minimum, for the Slider to\n   * function. All other Slider subcomponents should be passed as children\n   * inside the `SliderTrack`.\n   *\n   * @see Docs https://reach.tech/slider#slidertrack-children\n   */\n  children: React.ReactNode;\n};\n\nif (__DEV__) {\n  SliderTrack.displayName = \"SliderTrack\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * SliderRange\n *\n * The (typically) highlighted portion of the track that represents the space\n * between the slider's `min` value and its current value.\n *\n * @see Docs https://reach.tech/slider#sliderrange\n */\nconst SliderRangeImpl = forwardRefWithAs<SliderRangeProps>(function SliderRange(\n  { as: Comp = \"div\", children, style = {}, ...props },\n  forwardedRef\n) {\n  let { disabled, orientation, rangeStyle } = useSliderContext();\n  return (\n    <Comp\n      ref={forwardedRef}\n      style={{ position: \"absolute\", ...rangeStyle, ...style }}\n      {...props}\n      data-reach-slider-range=\"\"\n      data-disabled={disabled ? \"\" : undefined}\n      data-orientation={orientation}\n    />\n  );\n});\n\nif (__DEV__) {\n  SliderRangeImpl.displayName = \"SliderRange\";\n  SliderRangeImpl.propTypes = {};\n}\n\nconst SliderRange = memoWithAs(SliderRangeImpl);\n\n// TODO: Remove in 1.0\nconst SliderTrackHighlightImpl = forwardRefWithAs<SliderRangeProps>(\n  function SliderTrackHighlightImpl(props, ref) {\n    if (__DEV__) {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      React.useEffect(() => {\n        warning(\n          false,\n          \"`SliderTrackHighlight` has been deprecated in favor of `SliderRange` and will be dropped from a future version of Reach UI.\"\n        );\n      }, []);\n    }\n    return (\n      <SliderRangeImpl\n        data-reach-slider-track-highlight=\"\"\n        {...props}\n        ref={ref}\n      />\n    );\n  }\n);\nif (__DEV__) {\n  SliderTrackHighlightImpl.displayName = \"SliderTrackHighlight\";\n  SliderTrackHighlightImpl.propTypes = SliderRangeImpl.propTypes;\n}\nexport interface SliderTrackHighlightProps extends SliderRangeProps {}\n\n/**\n * This component was renamed to `SliderRange` in a previous version of Reach\n * UI. `SliderTrackHighlight` will be dropped in a future version. We recommend\n * updating your projects to replace `SliderTrackHighlight` with `SliderRange`.\n *\n * @alias SliderRange\n */\nexport const SliderTrackHighlight = memoWithAs(SliderTrackHighlightImpl);\n\n/**\n * `SliderRange` accepts any props that a HTML div component accepts.\n * `SliderRange` will not accept or render any children.\n *\n * @see Docs https://reach.tech/slider#sliderrange-props\n */\ntype SliderRangeProps = {};\n\nif (__DEV__) {\n  SliderRange.displayName = \"SliderRange\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * SliderHandle\n *\n * The handle that the user drags along the track to set the slider value.\n *\n * @see Docs https://reach.tech/slider#sliderhandle\n */\nconst SliderHandleImpl = forwardRefWithAs<SliderHandleProps>(\n  function SliderHandle(\n    {\n      // min,\n      // max,\n      as: Comp = \"div\",\n      onBlur,\n      onFocus,\n      style = {},\n      onKeyDown,\n      ...props\n    },\n    forwardedRef\n  ) {\n    const {\n      ariaLabel,\n      ariaLabelledBy,\n      ariaValueText,\n      disabled,\n      handlePosition,\n      handleRef,\n      isVertical,\n      handleKeyDown,\n      orientation,\n      setHasFocus,\n      sliderMin,\n      sliderMax,\n      value,\n    } = useSliderContext();\n\n    const ref = useForkedRef(handleRef, forwardedRef);\n\n    return (\n      <Comp\n        aria-disabled={disabled || undefined}\n        // If the slider has a visible label, it is referenced by\n        // `aria-labelledby` on the slider element. Otherwise, the slider\n        // element has a label provided by `aria-label`.\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabel ? undefined : ariaLabelledBy}\n        // If the slider is vertically oriented, it has `aria-orientation` set\n        // to vertical. The default value of `aria-orientation` for a slider is\n        // horizontal.\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        aria-orientation={orientation}\n        // The slider element has the `aria-valuemax` property set to a decimal\n        // value representing the maximum allowed value of the slider.\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        aria-valuemax={sliderMax}\n        // The slider element has the `aria-valuemin` property set to a decimal\n        // value representing the minimum allowed value of the slider.\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        aria-valuemin={sliderMin}\n        // The slider element has the `aria-valuenow` property set to a decimal\n        // value representing the current value of the slider.\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        aria-valuenow={value}\n        // If the value of `aria-valuenow` is not user-friendly, e.g., the day\n        // of the week is represented by a number, the `aria-valuetext` property\n        // is set to a string that makes the slider value understandable, e.g.,\n        // \"Monday\".\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        aria-valuetext={ariaValueText}\n        // The element serving as the focusable slider control has role\n        // `slider`.\n        // https://www.w3.org/TR/wai-aria-practices-1.2/#slider_roles_states_props\n        role=\"slider\"\n        tabIndex={disabled ? -1 : 0}\n        {...props}\n        data-reach-slider-handle=\"\"\n        ref={ref}\n        onBlur={wrapEvent(onBlur, () => {\n          setHasFocus(false);\n        })}\n        onFocus={wrapEvent(onFocus, () => {\n          setHasFocus(true);\n        })}\n        onKeyDown={wrapEvent(onKeyDown, handleKeyDown)}\n        style={{\n          position: \"absolute\",\n          ...(isVertical\n            ? { bottom: handlePosition }\n            : { left: handlePosition }),\n          ...style,\n        }}\n      />\n    );\n  }\n);\n\nif (__DEV__) {\n  SliderHandleImpl.displayName = \"SliderHandle\";\n  SliderHandleImpl.propTypes = {};\n}\n\nconst SliderHandle = memoWithAs(SliderHandleImpl);\n\n/**\n * `SliderRange` accepts any props that a HTML div component accepts.\n *\n * @see Docs https://reach.tech/slider#sliderhandle-props\n */\ntype SliderHandleProps = {};\n\nif (__DEV__) {\n  SliderHandle.displayName = \"SliderHandle\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * SliderMarker\n *\n * A fixed value marker. These can be used to illustrate a range of steps or\n * highlight important points along the slider track.\n *\n * @see Docs https://reach.tech/slider#slidermarker\n */\nconst SliderMarkerImpl = forwardRefWithAs<SliderMarkerProps>(\n  function SliderMarker(\n    { as: Comp = \"div\", children, style = {}, value, ...props },\n    forwardedRef\n  ) {\n    const {\n      disabled,\n      isVertical,\n      orientation,\n      sliderMin,\n      sliderMax,\n      value: sliderValue,\n    } = useSliderContext();\n\n    let inRange = !(value < sliderMin || value > sliderMax);\n    let absoluteStartPosition = `${valueToPercent(\n      value,\n      sliderMin,\n      sliderMax\n    )}%`;\n\n    let state =\n      value < sliderValue\n        ? \"under-value\"\n        : value === sliderValue\n        ? \"at-value\"\n        : \"over-value\";\n\n    return inRange ? (\n      <Comp\n        ref={forwardedRef}\n        style={{\n          position: \"absolute\",\n          ...(isVertical\n            ? { bottom: absoluteStartPosition }\n            : { left: absoluteStartPosition }),\n          ...style,\n        }}\n        {...props}\n        data-reach-slider-marker=\"\"\n        data-disabled={disabled ? \"\" : undefined}\n        data-orientation={orientation}\n        data-state={state}\n        data-value={value}\n        children={children}\n      />\n    ) : null;\n  }\n);\n\nif (__DEV__) {\n  SliderMarkerImpl.displayName = \"SliderMarker\";\n  SliderMarkerImpl.propTypes = {\n    value: PropTypes.number.isRequired,\n  };\n}\n\nconst SliderMarker = memoWithAs(SliderMarkerImpl);\n\n/**\n * @see Docs https://reach.tech/slider#slidermarker-props\n */\ntype SliderMarkerProps = {\n  /**\n   * The value to denote where the marker should appear along the track.\n   *\n   * @see Docs https://reach.tech/slider#slidermarker-value\n   */\n  value: number;\n};\n\nif (__DEV__) {\n  SliderMarker.displayName = \"SliderMarker\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction clamp(val: number, min: number, max: number) {\n  return val > max ? max : val < min ? min : val;\n}\n\n/**\n * This handles the case when num is very small (0.00000001), js will turn\n * this into 1e-8. When num is bigger than 1 or less than -1 it won't get\n * converted to this notation so it's fine.\n *\n * @param num\n * @see https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Slider/Slider.js#L69\n */\nfunction getDecimalPrecision(num: number) {\n  if (Math.abs(num) < 1) {\n    const parts = num.toExponential().split(\"e-\");\n    const matissaDecimalPart = parts[0].split(\".\")[1];\n    return (\n      (matissaDecimalPart ? matissaDecimalPart.length : 0) +\n      parseInt(parts[1], 10)\n    );\n  }\n\n  const decimalPart = num.toString().split(\".\")[1];\n  return decimalPart ? decimalPart.length : 0;\n}\n\nfunction percentToValue(percent: number, min: number, max: number) {\n  return (max - min) * percent + min;\n}\n\nfunction roundValueToStep(value: number, step: number, min: number) {\n  let nearest = Math.round((value - min) / step) * step + min;\n  return Number(nearest.toFixed(getDecimalPrecision(step)));\n}\n\nfunction getPointerPosition(event: SomePointerEvent, touchId: TouchIdRef) {\n  if (touchId.current !== undefined && (event as TouchEvent).changedTouches) {\n    for (let i = 0; i < (event as TouchEvent).changedTouches.length; i += 1) {\n      const touch = (event as TouchEvent).changedTouches[i];\n      if (touch.identifier === touchId.current) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY,\n        };\n      }\n    }\n\n    return false;\n  }\n\n  return {\n    x: (event as PointerEvent | MouseEvent).clientX,\n    y: (event as PointerEvent | MouseEvent).clientY,\n  };\n}\n\nfunction getNewValue(\n  handlePosition:\n    | {\n        x: number;\n        y: number;\n      }\n    | false,\n  track: HTMLElement | null,\n  props: {\n    orientation: SliderOrientation;\n    min: number;\n    max: number;\n    step?: number;\n  }\n) {\n  let { orientation, min, max, step } = props;\n\n  if (!track || !handlePosition) {\n    return null;\n  }\n\n  let { left, width, bottom, height } = track.getBoundingClientRect();\n  let isVertical = orientation === SliderOrientation.Vertical;\n  let diff = isVertical ? bottom - handlePosition.y : handlePosition.x - left;\n  let percent = diff / (isVertical ? height : width);\n  let newValue = percentToValue(percent, min, max);\n\n  return clamp(\n    step ? roundValueToStep(newValue, step, min) : newValue,\n    min,\n    max\n  );\n}\n\nfunction useDimensions(ref: React.RefObject<HTMLElement | null>) {\n  const [{ width, height }, setDimensions] = React.useState({\n    width: 0,\n    height: 0,\n  });\n  // Many existing `useDimensions` type hooks will use `getBoundingClientRect`\n  // getBoundingClientRect does not work here when borders are applied.\n  // getComputedStyle is not as performant so we may want to create a utility to\n  // check for any conflicts with box sizing first and only use\n  // `getComputedStyle` if neccessary.\n  /* const { width, height } = ref.current\n    ? ref.current.getBoundingClientRect()\n    : 0; */\n\n  useIsomorphicLayoutEffect(() => {\n    let ownerDocument = getOwnerDocument(ref.current)!;\n    let ownerWindow = ownerDocument.defaultView || window;\n    if (ref.current) {\n      const {\n        height: _newHeight,\n        width: _newWidth,\n      } = ownerWindow.getComputedStyle(ref.current);\n      let newHeight = parseFloat(_newHeight);\n      let newWidth = parseFloat(_newWidth);\n\n      if (newHeight !== height || newWidth !== width) {\n        setDimensions({ height: newHeight, width: newWidth });\n      }\n    }\n  }, [ref, width, height]);\n  return { ref, width, height };\n}\n\nfunction valueToPercent(value: number, min: number, max: number) {\n  return ((value - min) * 100) / (max - min);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\ntype TrackRef = React.RefObject<HTMLDivElement | null>;\ntype HandleRef = React.RefObject<HTMLDivElement | null>;\ntype SliderRef = React.RefObject<HTMLDivElement | null>;\ntype TouchIdRef = React.MutableRefObject<number | undefined>;\n\ntype SomePointerEvent = TouchEvent | MouseEvent;\n\ninterface ISliderContext {\n  ariaLabel: string | undefined;\n  ariaLabelledBy: string | undefined;\n  ariaValueText: string | undefined;\n  handleDimensions: {\n    width: number;\n    height: number;\n  };\n  handlePosition: string;\n  handleRef: HandleRef;\n  hasFocus: boolean;\n  onKeyDown?: (event: React.KeyboardEvent<HTMLDivElement>) => void;\n  handleKeyDown: (event: React.KeyboardEvent<HTMLDivElement>) => void;\n  setHasFocus: React.Dispatch<React.SetStateAction<boolean>>;\n  sliderId: string | undefined;\n  sliderMax: number;\n  sliderMin: number;\n  value: number;\n  disabled: boolean;\n  isVertical: boolean;\n  orientation: SliderOrientation;\n  trackPercent: number;\n  trackRef: TrackRef;\n  rangeStyle: React.CSSProperties;\n  updateValue: (newValue: any) => void;\n}\n\ntype SliderChildrenRender = (props: {\n  ariaValueText?: string | undefined;\n  hasFocus?: boolean;\n  id?: string | undefined;\n  sliderId?: string | undefined;\n  max?: number;\n  min?: number;\n  value?: number;\n  valueText?: string | undefined; // TODO: Remove in 1.0\n}) => JSX.Element;\n\n////////////////////////////////////////////////////////////////////////////////\n// Exports\n\nexport default Slider;\nexport type {\n  SliderAlignment,\n  SliderHandleProps,\n  SliderInputProps,\n  SliderMarkerProps,\n  SliderProps,\n  SliderRangeProps,\n  SliderTrackProps,\n};\nexport {\n  Slider,\n  SliderHandle,\n  SliderHandleAlignment,\n  SliderInput,\n  SliderMarker,\n  SliderOrientation,\n  SliderTrack,\n  SliderRange,\n  SLIDER_HANDLE_ALIGN_CENTER,\n  SLIDER_HANDLE_ALIGN_CONTAIN,\n  SLIDER_ORIENTATION_HORIZONTAL,\n  SLIDER_ORIENTATION_VERTICAL,\n};\n"],"names":["SliderOrientation","SliderHandleAlignment","SLIDER_ORIENTATION_HORIZONTAL","Horizontal","SLIDER_ORIENTATION_VERTICAL","Vertical","SLIDER_HANDLE_ALIGN_CENTER","Center","SLIDER_HANDLE_ALIGN_CONTAIN","Contain","SliderContext","createNamedContext","useSliderContext","React","sliderPropTypes","defaultValue","PropTypes","number","disabled","bool","getAriaLabel","func","getAriaValueText","getValueText","handleAlignment","oneOf","min","max","name","string","orientation","onChange","step","value","Slider","forwardRefWithAs","forwardedRef","children","props","SliderInput","ref","_componentName","SliderTrack","SliderRange","SliderHandle","displayName","propTypes","node","ariaLabel","ariaLabelledBy","ariaValueTextProp","as","Comp","controlledValue","DEPRECATED_getValueText","onKeyDown","onMouseDown","onMouseMove","onMouseUp","onPointerDown","onPointerUp","onTouchEnd","onTouchMove","onTouchStart","rest","useControlledSwitchWarning","warning","touchId","id","useId","pointerDownRef","trackRef","handleRef","sliderRef","useForkedRef","hasFocus","setHasFocus","useDimensions","handleDimensions","useControlledState","_value","setValue","clamp","trackPercent","valueToPercent","isVertical","handleSize","height","width","handlePosition","handlePositionRef","useIsomorphicLayoutEffect","current","onChangeRef","updateValue","newValue","getNewValueFromEvent","event","getNewValue","getPointerPosition","handleKeyDown","useEventCallback","tenSteps","keyStep","key","preventDefault","roundValueToStep","ariaValueText","rangeStyle","ctx","sliderId","sliderMax","sliderMin","removeMoveEvents","noop","removeStartEvents","removeEndEvents","appEvents","handleSlideStart","isRightClick","ownerDocument","getOwnerDocument","ownerWindow","defaultView","window","changedTouches","touch","identifier","requestAnimationFrame","focus","addMoveListener","addEndListener","setPointerCapture","pointerId","releasePointerCapture","handlePointerMove","handleSlideStop","undefined","touchListener","wrapEvent","mouseListener","addEventListener","removeEventListener","pointerListener","addStartListener","sliderElement","useCheckStyles","Provider","tabIndex","isFunction","valueText","type","makeId","oneOfType","isRequired","SliderTrackImpl","style","position","memoWithAs","SliderRangeImpl","SliderTrackHighlightImpl","SliderTrackHighlight","SliderHandleImpl","onBlur","onFocus","role","bottom","left","SliderMarkerImpl","SliderMarker","sliderValue","inRange","absoluteStartPosition","state","val","getDecimalPrecision","num","Math","abs","parts","toExponential","split","matissaDecimalPart","length","parseInt","decimalPart","toString","percentToValue","percent","nearest","round","Number","toFixed","i","x","clientX","y","clientY","track","getBoundingClientRect","diff","setDimensions","getComputedStyle","_newHeight","_newWidth","newHeight","parseFloat","newWidth"],"mappings":"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"}